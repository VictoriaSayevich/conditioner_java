(()=>{"use strict";const e={async getConditionerByID(e){const t=`http://localhost:8088/api/conditioner/get-conditioner/${e}`;let n=null;try{const e=await fetch(t);n=await e.json()}catch(e){alert("getConditionerByID error",e)}return n},async getAllConditioners(){let e=null;try{const t=await fetch("http://localhost:8088/api/conditioner/get-all-conditioner");e=await t.json()}catch(e){alert("getAllConditioners error",e)}return e},async postLogin(e,t){let n=null;try{const o=await fetch("http://localhost:8088/api/user/login",{method:"POST",body:JSON.stringify({login:e,password:t}),mode:"cors",headers:{"Content-Type":"application/json"}});n=await o.json()}catch(e){alert("Неверный логин или пароль",e)}return n},async deleteProduct(e){let t=null;const n=`http://localhost:8088/api/conditioner/delete-conditioner/${e}`;try{const e=await fetch(n,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});t=await e.json()}catch(e){alert("deleteProduct",e)}},async updateProduct(e,t){let n=null;const o=`http://localhost:8088/api/conditioner/update-conditioner/${e}`;console.log(localStorage.getItem("token"));try{const e=await fetch(o,{method:"PUT",body:JSON.stringify(t),headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});n=await e.json(),console.log(n)}catch(e){alert("updateProduct",e)}},async createProduct(e){let t=null;try{const n=await fetch("http://localhost:8088/api/conditioner/create-conditioner",{method:"POST",body:JSON.stringify(e),headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});t=await n.json()}catch(e){alert("createProduct",e)}}},t=async t=>await e.getConditionerByID(t),n={createNode(e,t){let n=document.createElement(e);return t&&t.forEach((e=>{n.classList.add(e)})),n},mainSectionTpl(){return this.createNode("main",["site-main"])},bannerTpl(){let e=this.createNode("section",["hero-banner"]);return e.innerHTML='\n            <div class="container">\n                <div class="row no-gutters align-items-center pt-60px">\n                    <div class="col-5 d-none d-sm-block">\n                        <div class="hero-banner__img">\n                            <img class="img-fluid" src="../src/img/hero-banner.png" alt="главное изображение">\n                        </div>\n                    </div>\n                    <div class="col-sm-7 col-lg-6 offset-lg-1 pl-4 pl-md-5 pl-lg-0">\n                        <div class="hero-banner__content">\n                            <h4>Кондиционеры нового поколения</h4>\n                            <h1>Candi Cool</h1>\n                            <p>Будьте всегда спокойны вместе с нами</p>\n                            <a class="button button-hero" href="./pages/login.html">Администрировать</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ',e},carouselContainerTpl(){let e=this.createNode("section",["section-margin","mt-0"]);return e.innerHTML='<div class="owl-carousel owl-theme hero-carousel" id="carousel-conditioners"></div>',e},carouselCardTpl(e){let t=this.createNode("div",["hero-carousel__slide"]);return t.innerHTML=`\n            <img src="${e.img_url}" alt="${e.brend} ${e.model}" class="img-fluid">\n            <a href="#" class="hero-carousel__slideOverlay">\n                <h3>${e.brend}</h3>\n                <p>${e.model}</p>\n            </a>\n        `,t},containerTpl(){let e=this.createNode("section",["section-margin","calc-60px"]);return e.innerHTML='\n            <div class="container">\n                <div class="section-intro pb-60px">\n                    <p>Успей купить!</p>\n                    <h2>Популярные <span class="section-intro__style">кондиционеры</span></h2>\n                </div>\n                <div class="row" id="container-conditioners"></div>\n            </div>\n            ',e},cardTpl(e){let t=this.createNode("div",["col-md-6","col-lg-4","col-xl-3"]);return t.innerHTML=`\n            <div class="card text-center card-product">\n                <div class="card-product__img">\n                    <a href="./pages/single-product.html?id=${e.conditionerId}"><img class="card-img" src="${e.img_url}" alt="${e.brend} ${e.model}"></a>\n                </div>\n                <div class="card-body">\n                    <p>Кондиционер</p>\n                    <h4 class="card-product__title"><a href="./pages/single-product.html?id=${e.conditionerId}">${e.brend} ${e.model}</a></h4>\n                    <p class="card-product__price">${e.price.toFixed(2)} р.</p>\n                </div>\n            </div>\n        `,t},singleCardTpl(e){let t=this.createNode("div",["product_image_area"]);return t.innerHTML=`\n            <div class="container">\n                <div class="row s_product_inner">\n                    <div class="col-lg-6">\n                        <div class="single-prd-item">\n                            <img class="img-fluid" src="${e.img_url}" alt="${e.brend} ${e.model}">\n                        </div>\n                    </div>\n                    <div class="col-lg-5 offset-lg-1">\n                        <div class="s_product_text">\n                            <h3>${e.brend} ${e.model}</h3>\n                            <h2>${e.price} р.</h2>\n                            <ul class="list">\n                                <li><span>Тип</span> : ${e.type}</li>\n                                <li><span>Страна</span> : ${e.country}</li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,t},isTrue:e=>e?"Да":"Нет",singleCardDescriptionTabTpl(e){let t=this.createNode("section",["product_description_area"]);return t.innerHTML=`\n            <div class="container">\n                <div class="tab-content" id="myTabContent">\n                    <div class="table-responsive">\n                        <table class="table">\n                            <tbody>\n                                <tr><td><h5>Тип внутреннего блока</h5></td>\n                                    <td><h5>${e.inside_block}</h5></td></tr>\n                                <tr><td><h5>Режимы работы</h5></td>\n                                    <td><h5>${e.operating_mode}</h5></td></tr>\n                                <tr><td><h5>Осушение воздуха</h5></td>\n                                    <td><h5>${this.isTrue(e.air_filter)}</h5></td> </tr>\n                                <tr><td><h5>Инвертор</h5></td>\n                                    <td><h5>${this.isTrue(e.invertor)}</h5></td></tr>\n                                <tr><td><h5>Холодопроизводительность</h5></td>\n                                    <td><h5>${e.cooling_capacity} Вт</h5></td> </tr>\n                                <tr><td><h5>Тип хладагента</h5></td>\n                                    <td><h5>${e.refrigerant_type}</h5></td> </tr>\n                                <tr><td><h5>Пульт ДУ</h5></td>\n                                    <td><h5>${this.isTrue(e.remote_manage)}</h5></td></tr>\n                            </tbody>\n                        </table>\n                    </div> \n                </div> \n            </div>     \n        `,t},footer(){let e=this.createNode("footer",["product_description_area"]);return e.innerHTML='\n            <div class="footer-area footer-only">\n                <div class="container">\n                    <div class="row section_gap">\n                        <div class="col-lg-3 col-lg-6 col-lg-6">\n                            <div class="single-footer-widget tp_widgets ">\n                                <h4 class="footer_title large_title">CandiCool</h4>\n                                <p>Современное понятие «кондиционер» как обозначение устройства для поддержания заданной температуры в помещении, существует достаточно давно.</p>\n                                <p>Perkins приписывают первый патент на парокомпрессионный холодильный цикл, выданный 14 августа 1835 г. и озаглавленный «Аппарат и средства для производства льда и охлаждающих жидкостей».</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="footer-bottom">\n                <div class="container">\n                    <div class="row d-flex">\n                        <p class="col-lg-12 footer-text text-center">\n                            &copy; Виктория Саевич\n                        </p>\n                    </div>\n                </div>\n            </div>\n        ',e},loginBlockTpl(){const e=this.createNode("div",["col-lg-6"]);return e.innerHTML='\n            <div class="login_box_img">\n                <div class="hover">\n                    <h4>Cadni Cool администрирование</h4>\n                    <p>Войдите в аккаунт, чтобы добавлять, удалять и редактировать товары</p>\n                </div>\n            </div>\n        ',e},formTpl(){let e=this.createNode("div",["col-lg-6"]);return e.innerHTML='\n            <div class="login_form_inner register_form_inner">\n                <h3>Войти в панель администрирования</h3>\n                <form class="row login_form" id="register_form">\n                    <div class="col-md-12 form-group">\n                        <input type="text" class="form-control" id="login" name="login" placeholder="Логин" onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'Логин\'">\n                    </div>\n                    <div class="col-md-12 form-group">\n                        <input type="password" class="form-control" id="password" name="password" placeholder="Пароль" onfocus="this.placeholder = \'\'" onblur="this.placeholder = \'Пароль\'">\n                    </div>\n                    <div class="col-md-12 form-group">\n                        <button type="submit" value="submit" class="button button-register w-100">Войти</button>\n                    </div>\n                </form>\n            </div>\n        ',e},adminTestTpl(e){let t=this.createNode("h1");return t.innerHTML=`${e.country}`,t},adminActionTpl(){let e=this.createNode("div",["col-lg-4"]);return e.innerHTML='\n            <div class="order_box" id="admin_actions">\n                <h2>Выберите действие</h2>\n                <div class="payment_item">\n                    <div class="col-md-12 form-group">\n                        <button id="add" class="button button-register w-100" style="margin: 5px 0;">Добавить</button>\n                        <button id="update" class="button button-register w-100" style="margin: 5px 0;">Редактировать</button>\n                        <button id="delete" class="button button-register w-100" style="margin: 5px 0;">Удалить</button>\n                    </div>\n                </div>\n            </div>\n        ',e},adminProductFormTpl(){let e=this.createNode("div",["col-lg-8"]);return e.id="admin_form_parent",e.innerHTML='\n            <form class="row contact_form" method="post" action="" id="admin_container" novalidate="novalidate">\n                <div class="col-md-6 form-group p_star">\n                    <h6>Бренд</h6>\n                    <input type="text" class="form-control" id="brend" name="brend" required>\n                </div>\n                <div class="col-md-6 form-group p_star">\n                    <h6>Модель</h6>\n                    <input type="text" class="form-control" id="model" name="model" required>\n                </div>\n                <div class="col-md-12 form-group">\n                    <h6>Тип</h6>\n                    <input type="text" class="form-control" id="type" name="type" required>\n                </div>\n                <div class="col-md-6 form-group p_star">\n                    <h6>Страна</h6>\n                    <select class="country_select" name="country">\n                        <option value="Германия">Германия</option>\n                        <option value="Италия">Италия</option>\n                        <option value="Африка">Африка</option>\n                        <option value="Россия">Россия</option>\n                        <option value="Америка">Америка</option>\n                        <option value="Китай">Китай</option>\n                    </select>\n                </div>\n                <div class="col-md-6 form-group p_star">\n                    <h6>Тип внутреннего блока</h6>\n                    <input type="text" class="form-control" id="inside_block" name="inside_block" required>\n                </div>\n                <div class="col-md-12 form-group p_star">\n                    <h6>Ссылка на изображение</h6>\n                    <input type="text" class="form-control" id="img_url" name="img_url" required value="https://img.5element.by/import/images/ut/goods/good_28b71ca9-da0f-11e9-80c7-005056840c70/good_img_ab1fdbf9-db93-11e9-80c7-005056840c70.jpg">\n                </div>\n                <div class="col-md-12 form-group">\n                    <h6>Режим работы</h6>\n                    <select class="country_select" name="operating_mode">\n                        <option value="Охлождение">Охлождение</option>\n                        <option value="Увлажнение">Увлажнение воздуха</option>\n                    </select>\n                </div>\n                <div class="col-md-12 form-group">\n                    <div class="creat_account">\n                        <input type="checkbox" id="f-option2" name="air_filter" required>\n                        <label for="f-option2">Осушение воздуха</label>\n                    </div>\n                </div>\n                <div class="col-md-12 form-group">\n                    <div class="creat_account">\n                        <input type="checkbox" id="f-option2" name="invertor" required>\n                        <label for="f-option2">Инвертор</label>\n                    </div>\n                </div>\n                <div class="col-md-12 form-group">\n                    <div class="creat_account">\n                        <input type="checkbox" id="f-option2" name="remote_manage" required>\n                        <label for="f-option2">Пульт ДУ</label>\n                    </div>\n                </div>\n                <div class="col-md-6 form-group p_star">\n                    <h6>Холодпроизводительность</h6>\n                    <input type="number" class="form-control" id="cooling_capacity" name="cooling_capacity" min="1000" max="5000" value="1500" required>\n                </div>\n                <div class="col-md-6 form-group p_star">\n                    <h6>Тип хологента</h6>\n                    <input type="text" class="form-control" id="refrigerant_type" name="refrigerant_type" required>\n                </div>\n                <div class="col-md-12 form-group">\n                    <h6>Цена</h6>\n                    <input type="number" step="0.5" class="form-control" id="price" name="price" min="0" value="700.95" required>\n                </div>\n                <div class="col-md-12 form-group">\n                    <button type="submit" value="submit" class="button hero-button w-100">Отправить</button>\n                </div>\n            </form>\n        ',e}},o=async()=>await e.getAllConditioners(),r={getQueryVariable(e){let t={};return location.search.substring(1).split("&").forEach((e=>{let n=e.split("=");t[n[0]]=n[1]})),t[e]}},i={test(){this.actionControl()},addProductTab(){},isChecked:e=>"on"===e,isHide:e=>null==e,async addProduct(){document.querySelector("#action_title").textContent="Добавление продукта";let e=document.querySelector("#admin_form_product");e.name="add",e.onsubmit=async t=>{t.preventDefault();const n=new FormData(e);this.isChecked(n.get("air_filter")),this.isChecked(n.get("invertor")),this.isChecked(n.get("remote_manage")),n.get("price"),n.get("brend"),n.get("model"),n.get("img_url"),n.get("type"),n.get("inside_block"),n.get("operating_mode"),n.get("cooling_capacity"),n.get("refrigerant_type"),n.get("country")}},updateProduct(){document.querySelector("#action_title").textContent="Редактирование продукта";const e=document.querySelector("#admin_form_product");e.name="update",e.onsubmit=async t=>{t.preventDefault(),new FormData(e)}},toggleFormList(){let e=document.querySelector("#admin_all_products"),t=document.querySelector("#admin_form_product");void 0===e?(t.remove(),a.createAdminProductList()):(e.remove(),a.createAdminProductForm())},showForm(){document.querySelector("#admin_row").append(n.adminProductFormTpl())},async showAllProducts(){let t=document.querySelector("#admin_row"),o=n.createNode("div",["row"]);o.id="admin_all_products",t.append(o);let r=await e.getAllConditioners();console.log(o),console.log(r);for(let e=0;e<r.length;e++)o.append(n.cardTpl(r[e]))},deleteProduct(){document.querySelector("#action_title").textContent="Удаление продукта",this.showAllProducts()},goToAddProduct(){window.location.href="./add.html",window.addEventListener("DOMContentLoaded",(function(){a.createAdminProductForm()}))},actionControl(){document.querySelector("#admin_actions").addEventListener("mousedown",(e=>{switch(e.target.id){case"add":this.goToAddProduct();break;case"update":this.updateProduct();break;case"delete":this.deleteProduct()}}))}},a={buildDOM(){this.createBanner(),this.createConditionerList()},toggleClass(e,t,n){e.classList.add(t),e.classList.remove(n)},createBanner(){document.querySelector("body").append(n.mainSectionTpl()),document.querySelector("main").append(n.bannerTpl())},async createCarousel(e=3){document.querySelector("main").append(n.carouselContainerTpl());const t=document.querySelector("#carousel-conditioners"),r=await o();r.length<e&&(e=r.length);for(let o=0;o<e;o++)t.append(n.carouselCardTpl(r[o]))},async createConditionerList(e=9){document.querySelector("main").append(n.containerTpl());const t=document.querySelector("#container-conditioners"),r=await o();r.length<e&&(e=r.length);for(let o=0;o<e;o++)t.append(n.cardTpl(r[o]))},async createSingleProduct(){const e=r.getQueryVariable("id"),o=await t(e);document.querySelector("body").append(n.singleCardTpl(o))},async createDescriptionTab(){const e=r.getQueryVariable("id"),o=await t(e);document.querySelector("body").append(n.singleCardDescriptionTabTpl(o))},createFooter(){document.querySelector("body").append(n.footer())},createLoginSection(){const e=n.createNode("section",["login_box_area","section-margin"]),t=n.createNode("div",["container"]),o=n.createNode("div",["row"]);o.append(n.loginBlockTpl()),o.append(n.formTpl()),t.append(o),e.append(t),document.querySelector("body").append(e)},async createAdminSection(){const e=n.createNode("section",["checkout_area","section-margin--small"]),t=n.createNode("div",["container"]),o=n.createNode("div",["billing_details"]),r=n.createNode("div",["row"]);r.id="admin_row",o.innerHTML='<h2 style="padding: 20px 0 40px;" id="action_title">Что нужно сделать?</h2>',r.append(n.adminActionTpl()),t.append(o),o.append(r),e.append(t),document.querySelector("body").append(e)},async createAdminProductList(){let t=n.createNode("div",["row"]),o=await e.getAllConditioners(),r=document.querySelector("#admin_row");for(let e=0;e<o.length;e++)t.append(n.cardTpl(o[e]));t.id="admin_all_products",t.style.display="none",r.append(t)},createAdminProductForm(){document.querySelector("#admin_row").append(n.adminProductFormTpl())}};window.addEventListener("DOMContentLoaded",(function(){console.log("Good"),a.createAdminSection(),i.test()}))})();